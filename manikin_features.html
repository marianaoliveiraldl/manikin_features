
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manikin Feature Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --yes:#c8e6c9; --no:#ffcdd2; --border:#ddd; --bg:#f6f6f6; --active:#0b5ed7; --activeText:#fff; }
    body { font-family: Arial, sans-serif; margin: 24px; }
    h2 { margin-top: 0; }
    .controls { display: grid; grid-template-columns: auto auto auto; gap: 12px; align-items: center; }
    .controls select, .controls button { padding: 8px; font-size: 14px; }
    .views { display: flex; gap: 8px; }
    .views button { border: 1px solid #ccc; background: #fff; cursor: pointer; border-radius: 4px; }
    .views button.active { background: var(--active); color: var(--activeText); border-color: var(--active); }
    .toggle { display: flex; gap: 8px; align-items: center; }
    .subcontrols { display: flex; gap: 8px; align-items: center; }
    table { border-collapse: collapse; width: 100%; margin-top: 16px; }
    th, td { border: 1px solid var(--border); padding: 6px 8px; text-align: left; white-space: nowrap; }
    th { background: var(--bg); position: sticky; top: 0; z-index: 1; }
    .yes { background-color: var(--yes); }
    .no  { background-color: var(--no); }
    .hidden { display: none; }
    .footer { margin-top: 16px; font-size: 12px; color: #666; }
    @media (max-width: 900px) {
      table { font-size: 13px; }
      .controls { grid-template-columns: 1fr; }
    }
    #hideXWrap, #featureSelectWrap, #manikinSelectWrap { display: none; }
  </style>
</head>
<body>
  <h2>Manikin Feature Finder</h2>

  <div class="controls">
    <div class="views">
      <button id="btnComplete" class="active">Complete view</button>
      <button id="btnFeature">Feature view</button>
      <button id="btnManikin">Manikin view</button>
    </div>
    <label class="toggle" id="hideXWrap">
      <input type="checkbox" id="hideX" />
      <span>Hide unsupported (X)</span>
    </label>
    <div class="subcontrols" id="featureSelectWrap">
      <label for="featureSelect">Feature:</label>
      <select id="featureSelect"></select>
    </div>
    <div class="subcontrols" id="manikinSelectWrap">
      <label for="manikinSelect">Manikin:</label>
      <select id="manikinSelect"></select>
    </div>
  </div>

  <table id="resultsTable"></table>

  <script>
    const TICK = '\u2713';
    const csv = `"Feature","SimMan 3G Plus","SimMan 3G","SimMan 3G Trauma","SimMan 3G Mystic","SimMan Essential","SimMan Essential Bleeding","SimMan ALS","Mama Anne","SimMom","Nursing Anne Simulator","SimBaby","SimJunior","SimNewB","SimNewB Classic"
"Fluids","${TICK}","X","X","X","X","X","X","X","X","X","X","X","X",""
"Circulation","X","X","X","X","${TICK}","X","${TICK}","X","${TICK}","${TICK}","X","X","X",""
"Circulation & Bleeding","${TICK}","X","X","X","X","X","X","${TICK}","X","X","X","X","X",""
"Circulation & Fluids","X","${TICK}","${TICK}","${TICK}","X","${TICK}","X","X","X","X","X","X","X",""
"Circulation & Motions","X","X","X","X","X","X","X","X","X","X","${TICK}","${TICK}","${TICK}","${TICK}"
"Convulsions","${TICK}","X","X","X","X","X","X","${TICK}","${TICK}","X","X","X","X",""
"EFM","X","X","X","X","X","X","X","${TICK}","${TICK}","X","X","X","X",""
"EFM Options","X","X","X","X","X","X","X","${TICK}","${TICK}","X","X","X","X",""
"Delivery","X","X","X","X","X","X","X","${TICK}","${TICK}","X","X","X","X",""
"CPR","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","X","X","${TICK}","X","X",""
"CPR History","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","X","X","${TICK}","X","X",""
"Airway & Breathing","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Cardiac","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Comments","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Connections Status","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Events","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Eyes","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Learner Patient Monitor Buttons","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Local PC Status","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Ongoing Care","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Patient Monitor","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Prediction","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Session Control","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Session Log","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Simulator","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Sounds","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Status Bar","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Theme Control","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"
"Trends","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}","${TICK}"`;

    function parseCSV(text) {
      const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
      return lines.map(line => {
        const cells = []; let i = 0, inQuotes = false, cell = '';
        while (i < line.length) {
          const ch = line[i];
          if (ch === '"') { if (inQuotes && line[i+1] === '"') { cell += '"'; i += 2; } else { inQuotes = !inQuotes; i++; } }
          else if (ch === ',' && !inQuotes) { cells.push(cell); cell = ''; i++; }
          else { cell += ch; i++; }
        }
        cells.push(cell);
        return cells.map(c => c.trim());
      });
    }

    function buildModel(rows) {
      const header = rows[0], manikins = header.slice(1);
      const dataByFeature = {}, dataByManikin = {};
      manikins.forEach(m => dataByManikin[m] = {});
      for (let r = 1; r < rows.length; r++) {
        const feature = rows[r][0]; if (!feature) continue;
        dataByFeature[feature] = {};
        for (let c = 1; c < header.length; c++) {
          const m = header[c], raw = rows[r][c] || '';
          const v = (raw.startsWith('\u2713') || raw.startsWith('✓')) ? '✓' : 'X';
          dataByFeature[feature][m] = v;
          dataByManikin[m][feature] = v;
        }
      }
      return { features: Object.keys(dataByFeature), manikins, dataByFeature, dataByManikin };
    }

    function renderComplete(el, model) {
      let html = '<tr><th>Feature \\ Manikin</th>';
      model.manikins.forEach(m => html += `<th>${m}</th>`); html += '</tr>';
      model.features.forEach(f => {
        html += `<tr><th>${f}</th>`;
        model.manikins.forEach(m => {
          const v = model.dataByFeature[f][m];
          html += `<td class="${v==='✓'?'yes':'no'}">${v}</td>`;
        });
        html += `</tr>`;
      });
      el.innerHTML = html;
    }

    function renderFeature(el, f, model, hideX = false) {
      el.innerHTML = `<tr><th>Manikin</th><th>${f}</th></tr>`;
      const row = model.dataByFeature[f];
      Object.keys(row).forEach(m => {
        const v = row[m];
        if (hideX && v !== '✓') return;
        el.innerHTML += `<tr><td>${m}</td><td class="${v==='✓'?'yes':'no'}">${v}</td></tr>`;
      });
    }

    function renderManikin(el, m, model) {
      el.innerHTML = `<tr><th>Feature</th><th>${m}</th></tr>`;
      const row = model.dataByManikin[m];
      Object.keys(row).forEach(f => {
        const v = row[f];
        el.innerHTML += `<tr><td>${f}</td><td class="${v==='✓'?'yes':'no'}">${v}</td></tr>`;
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const rows = parseCSV(csv);
      const model = buildModel(rows);
      if (!model) return;

      const featureSelect = document.getElementById('featureSelect');
      const manikinSelect = document.getElementById('manikinSelect');
      const featureWrap = document.getElementById('featureSelectWrap');
      const manikinWrap = document.getElementById('manikinSelectWrap');
      const hideXWrap = document.getElementById('hideXWrap');
      const hideX = document.getElementById('hideX');
      const table = document.getElementById('resultsTable');
      const btnComplete = document.getElementById('btnComplete');
      const btnFeature = document.getElementById('btnFeature');
      const btnManikin = document.getElementById('btnManikin');

      model.features.forEach(f => featureSelect.appendChild(new Option(f, f)));
      model.manikins.forEach(m => manikinSelect.appendChild(new Option(m, m)));

      let view = 'complete';
      function setActive(btn) {
        [btnComplete, btnFeature, btnManikin].forEach(b => b.classList.toggle('active', b === btn));
      }
      function render() {
        featureWrap.style.display = (view === 'feature') ? 'flex' : 'none';
        manikinWrap.style.display = (view === 'manikin') ? 'flex' : 'none';
        hideXWrap.style.display = (view === 'feature') ? 'flex' : 'none';

        if (view === 'complete') {
          renderComplete(table, model);
          setActive(btnComplete);
        } else if (view === 'feature') {
          renderFeature(table, featureSelect.value, model, hideX.checked);
          setActive(btnFeature);
        } else {
          renderManikin(table, manikinSelect.value, model);
          setActive(btnManikin);
        }
      }

      render();
      featureSelect.addEventListener('change', render);
      manikinSelect.addEventListener('change', render);
      hideX.addEventListener('change', render);
      btnComplete.addEventListener('click', () => { view = 'complete'; render(); });
      btnFeature.addEventListener('click', () => { view = 'feature'; render(); });
      btnManikin.addEventListener('click', () => { view = 'manikin'; render(); });
    });
  </script>

  <div class="footer">
    
  </div>
</body>
</html>
